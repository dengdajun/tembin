<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.base.database.customtrading.mapper.PromotionalSaleQueryMapper">
  <resultMap id="BaseResultMap" type="com.base.domains.querypojos.PromotionalSaleQuery">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <id column="id" property="id" jdbcType="BIGINT" />
      <result column="PromotionalSale_name" property="promotionalsaleName" jdbcType="VARCHAR" />
      <result column="DiscountType" property="discounttype" jdbcType="VARCHAR" />
      <result column="DiscountValue" property="discountvalue" jdbcType="DOUBLE" />
      <result column="PromotionalSaleType" property="promotionalsaletype" jdbcType="VARCHAR" />
      <result column="PromotionalSaleStartTime" property="promotionalsalestarttime" jdbcType="TIMESTAMP" />
      <result column="PromotionalSaleEndTime" property="promotionalsaleendtime" jdbcType="TIMESTAMP" />
      <result column="ebayAccountId" property="ebayaccountid" jdbcType="BIGINT" />
      <result column="siteid" property="siteid" jdbcType="BIGINT" />
      <result column="check_flag" property="checkFlag" jdbcType="VARCHAR" />
      <result column="PromotionalSaleID" property="promotionalsaleid" jdbcType="VARCHAR" />
      <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
      <result column="create_user" property="createUser" jdbcType="BIGINT" />
      <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
      <result column="ebayAccountName" property="ebayAccountName" jdbcType="VARCHAR" />
      <result column="siteurl" property="siteurl" jdbcType="VARCHAR" />
  </resultMap>

    <select id="selectByList" resultMap="BaseResultMap" parameterType="map">
        select rule.*,euser.ebay_account ebayAccountName,sites.imgurl siteurl  from trading_item_promotionalsale_rule rule
          left join usercontroller_ebay_account euser on rule.ebayAccountId=euser.id
          left join (select * from trading_data_dictionary where type='site') sites on rule.siteid=sites.id


            WHERE rule.create_user in
            <foreach item="ue" index="index" collection="users" open="(" separator="," close=")">#{ue,jdbcType=VARCHAR}</foreach>

          ORDER BY rule.create_time
    </select>
</mapper>